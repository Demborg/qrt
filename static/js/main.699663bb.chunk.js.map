{"version":3,"sources":["App.tsx","reportWebVitals.ts","index.tsx"],"names":["Video","videoRef","React","createRef","canvasRef","callback","computeFrame","setTimeout","video","current","canvas","ctx","getContext","width","videoHeight","height","drawImage","frame","getImageData","length","data","i","red","green","blue","gray","putImageData","this","navigator","mediaDevices","getUserMedia","facingMode","then","mediaStream","srcObject","onloadedmetadata","e","play","catch","err","console","log","name","message","className","autoPlay","ref","playsInline","Component","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"mOAOMA,E,4MAEJC,SAAWC,IAAMC,Y,EACjBC,UAAYF,IAAMC,Y,EAuBlBE,SAAW,WACT,EAAKC,eACLC,YAAW,WACP,EAAKF,aACJ,I,EAGPC,aAAe,WACb,IAAIE,EAAQ,EAAKP,SAASQ,QACtBC,EAAS,EAAKN,UAAUK,QACxBE,EAAG,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAQE,WAAW,MACzBC,EAAQL,EAAMM,YAAc,EAC5BC,EAASP,EAAMM,YAAc,EACjC,GAAc,IAAVD,EAAJ,CAGAF,EAAIK,UAAUR,EAAO,EAAG,EAAGO,EAAQF,GAKnC,IAJA,IAAMI,EAAQN,EAAIO,aAAa,EAAG,EAAGH,EAAQF,GACvCM,EAASF,EAAMG,KAAKD,OACpBC,EAAOH,EAAMG,KAEVC,EAAI,EAAGA,EAAIF,EAAQE,GAAK,EAAG,CAClC,IAAMC,EAAMF,EAAKC,EAAI,GACfE,EAAQH,EAAKC,EAAI,GACjBG,EAAOJ,EAAKC,EAAI,GAClBI,GAAQH,EAAMC,EAAQC,GAAQ,GAC9BF,EAAME,GAAQF,EAAMC,KACtBH,EAAKC,EAAI,GAAKI,GAEhBL,EAAKC,EAAI,GAAKI,EACdL,EAAKC,EAAI,GAAKI,EAEhBd,EAAIe,aAAaT,EAAO,EAAG,K,uDArD7B,WACE,IACIT,EAAQmB,KAAK1B,SAASQ,QAC1BmB,UAAUC,aACPC,aAHe,CAACtB,MAAO,CAAEuB,WAAY,iBAIrCC,MAAK,SAASC,GACTzB,IACFA,EAAM0B,UAAYD,EAClBzB,EAAM2B,iBAAmB,SAASC,GAC5B5B,GACFA,EAAM6B,YAKbC,OAAM,SAASC,GACdC,QAAQC,IAAIF,EAAIG,KAAO,KAAOH,EAAII,YAEpChB,KAAKtB,a,oBAsCT,WACE,OACE,sBAAKuC,UAAU,eAAf,UACE,uBAAOC,UAAU,EAAMC,IAAKnB,KAAK1B,SAAU8C,aAAa,EAAMH,UAAU,UACxE,wBAAQ7B,OAAQ,IAAKF,MAAO,IAAKiC,IAAKnB,KAAKvB,UAAWwC,UAAU,iB,GAjEpD1C,IAAM8C,WAgFXC,MARf,WACE,OACE,8BACE,cAAC,EAAD,OCpESC,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBpB,MAAK,YAAkD,IAA/CqB,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCHdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1BZ,M","file":"static/js/main.699663bb.chunk.js","sourcesContent":["import React from 'react';\nimport './App.css';\ninterface VideoProps { \n}\ninterface VideoState { \n}\n\nclass Video extends React.Component<VideoProps, VideoState> {\n\n  videoRef = React.createRef<HTMLVideoElement>()\n  canvasRef = React.createRef<HTMLCanvasElement>()\n\n  componentDidMount() {\n    var constraints = {video: { facingMode: \"environment\" }}\n    let video = this.videoRef.current \n    navigator.mediaDevices\n      .getUserMedia(constraints)\n      .then(function(mediaStream) {\n        if (video) {\n          video.srcObject = mediaStream;\n          video.onloadedmetadata = function(e) {\n            if (video) {\n              video.play()\n            }\n          }\n        }\n      })\n      .catch(function(err) {\n        console.log(err.name + \": \" + err.message);\n      }); // always check for errors at the end.\n      this.callback()\n  }\n  \n  callback = () => {\n    this.computeFrame();\n    setTimeout(() => {\n        this.callback();\n      }, 0);\n  }\n\n  computeFrame = () => {\n    let video = this.videoRef.current!\n    let canvas = this.canvasRef.current!\n    let ctx = canvas?.getContext('2d')!\n    let width = video.videoHeight / 2\n    let height = video.videoHeight / 2\n    if (width === 0) {\n      return \n    }\n    ctx.drawImage(video, 0, 0, height, width)\n    const frame = ctx.getImageData(0, 0, height, width)\n    const length = frame.data.length\n    const data = frame.data\n\n    for (let i = 0; i < length; i += 4) {\n      const red = data[i + 0];\n      const green = data[i + 1];\n      const blue = data[i + 2];\n      let gray = (red + green + blue) / 3\n      if (red < blue || red < green) { \n        data[i + 0] = gray;\n      }\n      data[i + 1] = gray;\n      data[i + 2] = gray;\n    }\n    ctx.putImageData(frame, 0, 0);\n  };\n\n  render() {\n    return (\n      <div className=\"videoWrapper\">\n        <video autoPlay={true} ref={this.videoRef} playsInline={true} className=\"video\"></video>\n        <canvas height={300} width={300} ref={this.canvasRef} className=\"video\"></canvas>\n      </div>\n    );\n  }\n\n}\n\nfunction App() {\n  return (\n    <div>\n      <Video/>\n    </div>\n  )\n}\n\nexport default App;","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n}\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}